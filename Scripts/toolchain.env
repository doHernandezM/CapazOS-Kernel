#!/usr/bin/env bash
#
# Toolchain environment for the Capaz bootâ€‘only project.
#
# This file defines environment variables pointing at the LLVM tools
# installed via Homebrew on macOS.  It is sourced by build scripts
# that depend on a deterministic toolchain selection.  The SWIFT
# toolchain is exported for completeness but is unused in this phase.

set -euo pipefail

# Homebrew LLVM tools (pinned, no PATH ambiguity)
export LLVM_BIN="/opt/homebrew/opt/llvm/bin"
export LLD_BIN="/opt/homebrew/opt/lld/bin"

export CC="$LLVM_BIN/clang"
export CXX="$LLVM_BIN/clang++"
export AS="$LLVM_BIN/clang"
export LD="$LLD_BIN/ld.lld"
export OBJCOPY="$LLVM_BIN/llvm-objcopy"
export NM="$LLVM_BIN/llvm-nm"

# Import Swiftly environment
 . "${SWIFTLY_HOME_DIR:-$HOME/.swiftly}/env.sh"

export SWIFTC="$(command -v swiftc || true)"
