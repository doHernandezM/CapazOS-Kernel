#!/usr/bin/env bash
set -euo pipefail

# Homebrew LLVM tools (pinned, no PATH ambiguity)
export LLVM_BIN="/opt/homebrew/opt/llvm/bin"
export LLD_BIN="/opt/homebrew/opt/lld/bin"

export CC="$LLVM_BIN/clang"
export CXX="$LLVM_BIN/clang++"
export AS="$LLVM_BIN/clang"
export LD="$LLD_BIN/ld.lld"
export OBJCOPY="$LLVM_BIN/llvm-objcopy"
export READELF="$LLVM_BIN/llvm-readelf"
export NM="$LLVM_BIN/llvm-nm"

# Ensure Xcode scripts see swiftly's selected toolchain
if [ -f "${SWIFTLY_HOME_DIR:-$HOME/.swiftly}/env.sh" ]; then
  . "${SWIFTLY_HOME_DIR:-$HOME/.swiftly}/env.sh"
fi

# export TOOLCHAINS=org.swift.62202512171a
export SWIFTC="$(command -v swiftc)"
